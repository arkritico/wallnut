{
  "specialty": "plumbing",
  "regulation": "RGSPPDADAR",
  "version": "1.0",
  "last_updated": "2026-02-16",
  "total_rules": 0,

  "categories": [
    "Abastecimento de água",
    "Drenagem de águas residuais",
    "Drenagem de águas pluviais",
    "Materiais e equipamentos"
  ],

  "rules": [
    {
      "_comment": "EXEMPLO 1: Validação de Range (Pressão Mínima)",
      "id": "PLUMB_R001",
      "specialty": "plumbing",
      "category": "Abastecimento de água",
      "subcategory": "Pressões",

      "reference": "RGSPPDADAR Art. 42, n.º 1",
      "regulation": "RGSPPDADAR",
      "article": "Art. 42",
      "version": "1995",
      "date": "1995-08-23",

      "rule_text": "Pressão mínima em qualquer ponto de utilização: 50 kPa",
      "parameters": {
        "pressao_minima_kPa": 50,
        "unit": "kPa"
      },
      "validation_type": "range",

      "severity": "mandatory",

      "error_message": "Pressão inferior a 50 kPa - Não conforme RGSPPDADAR Art. 42",
      "success_message": "✓ Pressão mínima conforme (>= 50 kPa)",
      "recommendation": "Verificar dimensionamento ou considerar grupo de pressão",
      "explanation": "A pressão mínima garante funcionamento adequado de todos os aparelhos sanitários",

      "metadata": {
        "complexity": "simple",
        "requires_calculation": false,
        "requires_spatial_analysis": false,
        "requires_external_data": false,
        "application_scope": ["all"],
        "building_types": ["residential", "commercial", "industrial"]
      },

      "source": {
        "regulation": "RGSPPDADAR - Decreto Regulamentar 23/95",
        "article": "Art. 42, n.º 1",
        "version": "1995",
        "date": "1995-08-23",
        "document_url": "https://dre.pt/web/guest/legislacao-consolidada/-/lc/34570075/view",
        "pdf_page": 156
      }
    },

    {
      "_comment": "EXEMPLO 2: Validação Condicional (Declives por Diâmetro)",
      "id": "PLUMB_R002",
      "specialty": "plumbing",
      "category": "Drenagem de águas residuais",
      "subcategory": "Declives",

      "reference": "RGSPPDADAR Art. 68, n.º 1",
      "regulation": "RGSPPDADAR",
      "article": "Art. 68",
      "version": "1995",
      "date": "1995-08-23",

      "rule_text": "Declive mínimo: 2% para DN<50mm, 1% para DN>=50mm",
      "parameters": {
        "declive_dn_menor_50_percent": 2.0,
        "declive_dn_maior_50_percent": 1.0,
        "unit": "%"
      },
      "validation_type": "conditional",

      "conditional_logic": {
        "conditions": [
          {
            "if": "diametro_nominal < 50",
            "then": "declive >= 0.02"
          },
          {
            "if": "diametro_nominal >= 50",
            "then": "declive >= 0.01"
          }
        ]
      },

      "severity": "mandatory",

      "error_message": "Declive insuficiente para DN [DN]mm - Não conforme RGSPPDADAR Art. 68",
      "success_message": "✓ Declive de drenagem conforme",
      "recommendation": "Ajustar cotas para garantir declive mínimo adequado ao diâmetro",
      "explanation": "Declive adequado garante velocidade suficiente para autolimpeza",

      "metadata": {
        "complexity": "medium",
        "requires_calculation": true,
        "requires_spatial_analysis": true,
        "requires_external_data": false,
        "application_scope": ["all"],
        "building_types": ["residential", "commercial", "industrial"]
      },

      "source": {
        "regulation": "RGSPPDADAR - Decreto Regulamentar 23/95",
        "article": "Art. 68, n.º 1",
        "version": "1995",
        "date": "1995-08-23",
        "document_url": "https://dre.pt/web/guest/legislacao-consolidada/-/lc/34570075/view",
        "pdf_page": 178
      }
    },

    {
      "_comment": "EXEMPLO 3: Validação com Fórmula (Caudal)",
      "id": "PLUMB_R003",
      "specialty": "plumbing",
      "category": "Abastecimento de água",
      "subcategory": "Dimensionamento",

      "reference": "RGSPPDADAR Art. 45, n.º 2",
      "regulation": "RGSPPDADAR",
      "article": "Art. 45",
      "version": "1995",
      "date": "1995-08-23",

      "rule_text": "Caudal mínimo por unidade de descarga: 0.15 l/s",
      "parameters": {
        "caudal_minimo_l_s": 0.15,
        "unit": "l/s"
      },
      "validation_type": "formula",

      "formula": "caudal_instalado >= (numero_unidades_descarga * 0.15)",

      "severity": "mandatory",

      "error_message": "Caudal insuficiente para [N] unidades - Não conforme RGSPPDADAR",
      "success_message": "✓ Caudal adequado para unidades de descarga",
      "recommendation": "Redimensionar tubagem ou reduzir número de unidades simultâneas",

      "metadata": {
        "complexity": "medium",
        "requires_calculation": true,
        "requires_spatial_analysis": false,
        "requires_external_data": false,
        "application_scope": ["all"],
        "building_types": ["residential", "commercial", "industrial"]
      },

      "source": {
        "regulation": "RGSPPDADAR - Decreto Regulamentar 23/95",
        "article": "Art. 45, n.º 2",
        "version": "1995",
        "date": "1995-08-23",
        "document_url": "https://dre.pt/web/guest/legislacao-consolidada/-/lc/34570075/view",
        "pdf_page": 158
      }
    },

    {
      "_comment": "EXEMPLO 4: Validação Boolean (Existência de Dispositivo)",
      "id": "PLUMB_R004",
      "specialty": "plumbing",
      "category": "Abastecimento de água",
      "subcategory": "Proteções",

      "reference": "RGSPPDADAR Art. 50, n.º 1",
      "regulation": "RGSPPDADAR",
      "article": "Art. 50",
      "version": "1995",
      "date": "1995-08-23",

      "rule_text": "Obrigatória proteção contra retorno em sistemas de água quente",
      "parameters": {
        "tem_protecao_retorno": true
      },
      "validation_type": "boolean",

      "severity": "mandatory",

      "error_message": "Ausência de proteção contra retorno em água quente - Não conforme RGSPPDADAR",
      "success_message": "✓ Proteção contra retorno presente",
      "recommendation": "Instalar válvula anti-retorno conforme NP EN 1717",

      "metadata": {
        "complexity": "simple",
        "requires_calculation": false,
        "requires_spatial_analysis": false,
        "requires_external_data": false,
        "application_scope": ["all"],
        "building_types": ["residential", "commercial", "industrial"]
      },

      "source": {
        "regulation": "RGSPPDADAR - Decreto Regulamentar 23/95",
        "article": "Art. 50, n.º 1",
        "version": "1995",
        "date": "1995-08-23",
        "document_url": "https://dre.pt/web/guest/legislacao-consolidada/-/lc/34570075/view",
        "pdf_page": 162
      }
    },

    {
      "_comment": "EXEMPLO 5: Validação Lookup (Tabela de Consulta)",
      "id": "PLUMB_R005",
      "specialty": "plumbing",
      "category": "Drenagem de águas residuais",
      "subcategory": "Dimensionamento",

      "reference": "RGSPPDADAR Art. 70, Anexo II",
      "regulation": "RGSPPDADAR",
      "article": "Art. 70",
      "version": "1995",
      "date": "1995-08-23",

      "rule_text": "Diâmetro mínimo de drenagem por tipo de aparelho (ver tabela)",
      "parameters": {
        "tabela_diametros": "diametros-minimos-aparelhos.json"
      },
      "validation_type": "lookup",

      "lookup_tables": {
        "table_name": "diametros_minimos_aparelhos",
        "table_file": "tables/diametros-minimos-aparelhos.json",
        "lookup_key": "tipo_aparelho",
        "lookup_value": "diametro_minimo_mm"
      },

      "severity": "mandatory",

      "error_message": "Diâmetro de [APARELHO] inferior ao mínimo - Não conforme RGSPPDADAR",
      "success_message": "✓ Diâmetro adequado para aparelho",
      "recommendation": "Utilizar diâmetro conforme tabela RGSPPDADAR Anexo II",

      "metadata": {
        "complexity": "simple",
        "requires_calculation": false,
        "requires_spatial_analysis": false,
        "requires_external_data": true,
        "application_scope": ["all"],
        "building_types": ["residential", "commercial", "industrial"]
      },

      "source": {
        "regulation": "RGSPPDADAR - Decreto Regulamentar 23/95",
        "article": "Art. 70, Anexo II",
        "version": "1995",
        "date": "1995-08-23",
        "document_url": "https://dre.pt/web/guest/legislacao-consolidada/-/lc/34570075/view",
        "pdf_page": 185
      }
    },

    {
      "_comment": "EXEMPLO 6: Validação Espacial (Distâncias)",
      "id": "PLUMB_R006",
      "specialty": "plumbing",
      "category": "Drenagem de águas residuais",
      "subcategory": "Caixas de visita",

      "reference": "RGSPPDADAR Art. 75, n.º 3",
      "regulation": "RGSPPDADAR",
      "article": "Art. 75",
      "version": "1995",
      "date": "1995-08-23",

      "rule_text": "Distância máxima entre caixas de visita: 15m",
      "parameters": {
        "distancia_maxima_m": 15,
        "unit": "m"
      },
      "validation_type": "spatial",

      "spatial_check": {
        "type": "distance",
        "condition": "distancia_entre_caixas <= 15",
        "parameters": {
          "max_distance_m": 15,
          "measurement_type": "horizontal"
        }
      },

      "severity": "mandatory",

      "error_message": "Distância entre caixas ([DIST]m) superior a 15m - Não conforme RGSPPDADAR",
      "success_message": "✓ Espaçamento de caixas de visita conforme",
      "recommendation": "Adicionar caixa de visita intermédia",

      "metadata": {
        "complexity": "medium",
        "requires_calculation": false,
        "requires_spatial_analysis": true,
        "requires_external_data": false,
        "application_scope": ["all"],
        "building_types": ["residential", "commercial", "industrial"]
      },

      "source": {
        "regulation": "RGSPPDADAR - Decreto Regulamentar 23/95",
        "article": "Art. 75, n.º 3",
        "version": "1995",
        "date": "1995-08-23",
        "document_url": "https://dre.pt/web/guest/legislacao-consolidada/-/lc/34570075/view",
        "pdf_page": 182
      }
    }
  ]
}
