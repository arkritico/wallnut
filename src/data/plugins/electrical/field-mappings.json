{
  "pluginId": "electrical",
  "version": "1.0.0",
  "description": "Mapeamento de campos para regras RTIEBT (Regras Técnicas das Instalações Eléctricas de Baixa Tensão)",
  "fields": [
    {
      "_group": "Dados Gerais da Instalação",
      "field": "electrical.compliance",
      "label": "Conformidade da instalação elétrica",
      "type": "boolean",
      "sources": ["form"],
      "required": true,
      "defaults": { "_default": false },
      "description": "Indica se a instalação elétrica cumpre os requisitos regulamentares (campo de portão para validação RTIEBT)"
    },
    {
      "_group": "Dados Gerais da Instalação",
      "field": "electrical.supplyType",
      "label": "Tipo de alimentação",
      "type": "select",
      "options": [
        { "value": "single_phase", "label": "Monofásica" },
        { "value": "three_phase", "label": "Trifásica" }
      ],
      "sources": ["form"],
      "required": true,
      "description": "Tipo de alimentação elétrica da instalação (monofásica 230 V ou trifásica 400 V)"
    },
    {
      "_group": "Dados Gerais da Instalação",
      "field": "electrical.contractedPower",
      "label": "Potência contratada",
      "type": "number",
      "unit": "kVA",
      "sources": ["form"],
      "required": true,
      "description": "Potência contratada junto do operador da rede de distribuição"
    },
    {
      "_group": "Dados Gerais da Instalação",
      "field": "electrical.installedPower",
      "label": "Potência instalada",
      "type": "number",
      "unit": "kW",
      "sources": ["form"],
      "required": true,
      "description": "Potência total instalada na instalação elétrica"
    },
    {
      "_group": "Dados Gerais da Instalação",
      "field": "electrical.designPower",
      "label": "Potência de dimensionamento",
      "type": "number",
      "unit": "kW",
      "sources": ["form"],
      "description": "Potência utilizada para dimensionamento da instalação, com aplicação de fatores de simultaneidade"
    },
    {
      "_group": "Dados Gerais da Instalação",
      "field": "electrical.max_AC_V",
      "label": "Tensão máxima CA",
      "type": "number",
      "unit": "V",
      "sources": ["form"],
      "required": true,
      "defaults": { "single_phase": 230, "three_phase": 400 },
      "description": "Tensão máxima em corrente alternada da instalação"
    },
    {
      "_group": "Dados Gerais da Instalação",
      "field": "electrical.numberOfCircuits",
      "label": "Número de circuitos",
      "type": "number",
      "sources": ["form"],
      "description": "Número total de circuitos da instalação elétrica"
    },
    {
      "_group": "Dados Gerais da Instalação",
      "field": "electrical.value",
      "label": "Valor genérico do parâmetro",
      "type": "number",
      "sources": ["form"],
      "description": "Campo numérico genérico utilizado em diversas verificações regulamentares RTIEBT"
    },
    {
      "_group": "Dados Gerais da Instalação",
      "field": "electrical.factor",
      "label": "Fator de correção/simultaneidade",
      "type": "number",
      "sources": ["form"],
      "defaults": { "_default": 1.0 },
      "description": "Fator multiplicativo aplicável (simultaneidade, correção de temperatura, agrupamento, etc.)"
    },
    {
      "_group": "Dados Gerais da Instalação",
      "field": "electrical.mandatory",
      "label": "Requisito obrigatório",
      "type": "boolean",
      "sources": ["form"],
      "defaults": { "_default": true },
      "description": "Indica se o requisito regulamentar é de cumprimento obrigatório"
    },

    {
      "_group": "Proteção e Segurança",
      "field": "electrical.hasMainCircuitBreaker",
      "label": "Disjuntor geral de entrada",
      "type": "boolean",
      "sources": ["form"],
      "required": true,
      "defaults": { "_default": true },
      "description": "Indica se existe disjuntor geral de entrada na instalação"
    },
    {
      "_group": "Proteção e Segurança",
      "field": "electrical.hasResidualCurrentDevice",
      "label": "Dispositivo diferencial residual (DDR)",
      "type": "boolean",
      "sources": ["form"],
      "required": true,
      "defaults": { "_default": true },
      "description": "Indica se a instalação possui proteção diferencial conforme RTIEBT"
    },
    {
      "_group": "Proteção e Segurança",
      "field": "electrical.rcdSensitivity",
      "label": "Sensibilidade do diferencial (DDR)",
      "type": "number",
      "unit": "mA",
      "sources": ["form"],
      "required": true,
      "defaults": { "_default": 30 },
      "description": "Corrente diferencial-residual estipulada de funcionamento (I\u0394n) — 30 mA para proteção de pessoas"
    },
    {
      "_group": "Proteção e Segurança",
      "field": "electrical.disconnectionTime",
      "label": "Tempo de corte",
      "type": "number",
      "unit": "s",
      "sources": ["form"],
      "defaults": { "_default": 0.4 },
      "description": "Tempo máximo de corte automático da alimentação em caso de defeito (0,4 s para circuitos terminais TN)"
    },
    {
      "_group": "Proteção e Segurança",
      "field": "electrical.hasSurgeProtection",
      "label": "Proteção contra sobretensões (DST)",
      "type": "boolean",
      "sources": ["form"],
      "defaults": { "_default": false },
      "description": "Indica se existe descarregador de sobretensões transitórias (tipo 2) na origem da instalação"
    },
    {
      "_group": "Proteção e Segurança",
      "field": "electrical.hasEarthingSystem",
      "label": "Sistema de ligação à terra",
      "type": "boolean",
      "sources": ["form"],
      "required": true,
      "defaults": { "_default": true },
      "description": "Indica se a instalação possui sistema de ligação à terra conforme RTIEBT"
    },
    {
      "_group": "Proteção e Segurança",
      "field": "electrical.earthingScheme",
      "label": "Esquema de ligação à terra",
      "type": "select",
      "options": [
        { "value": "TT", "label": "TT" },
        { "value": "TN-S", "label": "TN-S" },
        { "value": "TN-C", "label": "TN-C" },
        { "value": "TN-C-S", "label": "TN-C-S" },
        { "value": "IT", "label": "IT" }
      ],
      "sources": ["form"],
      "required": true,
      "defaults": { "_default": "TT" },
      "description": "Esquema de ligação à terra da instalação conforme RTIEBT Secção 312"
    },
    {
      "_group": "Proteção e Segurança",
      "field": "electrical.earthingResistance",
      "label": "Resistência de terra",
      "type": "number",
      "unit": "\u03a9",
      "sources": ["form"],
      "required": true,
      "description": "Valor da resistência do elétrodo de terra — deve cumprir RA \u00d7 I\u0394n \u2264 50 V"
    },
    {
      "_group": "Proteção e Segurança",
      "field": "electrical.hasEquipotentialBonding",
      "label": "Ligação equipotencial principal",
      "type": "boolean",
      "sources": ["form"],
      "required": true,
      "defaults": { "_default": true },
      "description": "Indica se existe ligação equipotencial principal conforme RTIEBT Secção 413"
    },

    {
      "_group": "Dimensionamento de Condutores",
      "field": "electrical.conductorSection",
      "label": "Secção do condutor",
      "type": "number",
      "unit": "mm\u00b2",
      "sources": ["form"],
      "description": "Secção transversal do condutor de fase"
    },
    {
      "_group": "Dimensionamento de Condutores",
      "field": "electrical.min_section_mm2",
      "label": "Secção mínima regulamentar",
      "type": "number",
      "unit": "mm\u00b2",
      "sources": ["form"],
      "defaults": { "_default": 1.5 },
      "description": "Secção mínima dos condutores conforme RTIEBT (1,5 mm\u00b2 iluminação, 2,5 mm\u00b2 tomadas)"
    },
    {
      "_group": "Dimensionamento de Condutores",
      "field": "electrical.neutralSection",
      "label": "Secção do condutor neutro",
      "type": "number",
      "unit": "mm\u00b2",
      "sources": ["form"],
      "description": "Secção transversal do condutor neutro — igual à fase até 16 mm\u00b2 (Cu)"
    },
    {
      "_group": "Dimensionamento de Condutores",
      "field": "electrical.voltageDrop",
      "label": "Queda de tensão (circuitos de força)",
      "type": "number",
      "unit": "%",
      "sources": ["form"],
      "defaults": { "_default": 5 },
      "description": "Queda de tensão máxima admissível nos circuitos de força motriz — 5% conforme RTIEBT"
    },
    {
      "_group": "Dimensionamento de Condutores",
      "field": "electrical.voltageDropLighting",
      "label": "Queda de tensão (circuitos de iluminação)",
      "type": "number",
      "unit": "%",
      "sources": ["form"],
      "defaults": { "_default": 3 },
      "description": "Queda de tensão máxima admissível nos circuitos de iluminação — 3% conforme RTIEBT"
    },

    {
      "_group": "Quadros Elétricos",
      "field": "electrical.distancia_max_m",
      "label": "Distância máxima ao quadro",
      "type": "number",
      "unit": "m",
      "sources": ["form"],
      "description": "Distância máxima entre o ponto de utilização e o quadro elétrico de distribuição"
    },
    {
      "_group": "Quadros Elétricos",
      "field": "electrical.impasse_m",
      "label": "Distância em impasse",
      "type": "number",
      "unit": "m",
      "sources": ["form"],
      "description": "Distância máxima em impasse para caminhos de cabos ou canalizações elétricas"
    },

    {
      "_group": "Instalações Especiais",
      "field": "electrical.hasBathroomZoneCompliance",
      "label": "Conformidade de zonas em casas de banho",
      "type": "boolean",
      "sources": ["form"],
      "defaults": { "_default": false },
      "description": "Indica se a instalação elétrica na casa de banho cumpre as zonas 0, 1, 2 e 3 conforme RTIEBT Secção 701"
    },
    {
      "_group": "Instalações Especiais",
      "field": "electrical.hasEVPreInstallation",
      "label": "Pré-instalação para veículos elétricos",
      "type": "boolean",
      "sources": ["form"],
      "defaults": { "_default": false },
      "description": "Indica se existe infraestrutura de pré-instalação para carregamento de veículos elétricos conforme DL 39/2010"
    },

    {
      "_group": "Verificação e Ensaios",
      "field": "electrical.insulationResistance",
      "label": "Resistência de isolamento",
      "type": "number",
      "unit": "M\u03a9",
      "sources": ["form"],
      "defaults": { "_default": 1.0 },
      "description": "Valor mínimo de resistência de isolamento da instalação — 1 M\u03a9 para tensão nominal \u2264 500 V"
    }
  ]
}